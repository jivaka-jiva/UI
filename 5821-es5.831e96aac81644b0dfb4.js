!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}(self.webpackChunkui=self.webpackChunkui||[]).push([[5821],{5821:function(r,o,n){"use strict";n.r(o),n.d(o,{AddProcedurePageModule:function(){return G}});var i=n(1116),u=n(1041),a=n(4812),c=n(3337),s=n(4762),d=n(7570),l=n(5366),p=n(6659),m=n(8372),f=n(8057),g=n(1950),h=n(5431),v=n(3070),Z=n(3841),w=n(6489),q=n(5706),A=n(9550);function x(e,r){if(1&e&&(l.TgZ(0,"mat-option",12),l._uU(1),l.qZA()),2&e){var t=r.$implicit;l.Q6J("value",t),l.xp6(1),l.Oqu(t)}}function T(e,r){1&e&&(l.TgZ(0,"ion-text"),l.TgZ(1,"p",13),l._uU(2,"*Swipe right to delete a procedure."),l.qZA(),l.qZA())}function k(e,r){if(1&e){var t=l.EpF();l.TgZ(0,"ion-item-sliding"),l.TgZ(1,"ion-item-options",14),l.TgZ(2,"ion-item-option",15),l.NdJ("click",function(){var e=l.CHM(t).$implicit;return l.oxw().deleteProcedure(e)}),l._uU(3,"Delete"),l.qZA(),l.qZA(),l.TgZ(4,"ion-item"),l.TgZ(5,"mat-expansion-panel",16),l.TgZ(6,"mat-expansion-panel-header"),l.TgZ(7,"mat-panel-description"),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"div",17),l.TgZ(10,"mat-form-field",18),l._UZ(11,"input",19),l.qZA(),l.TgZ(12,"mat-form-field"),l._UZ(13,"input",20),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var o=r.$implicit;l.xp6(5),l.Q6J("formGroup",o),l.xp6(3),l.hij(" ",o.get("procedure").value," "),l.xp6(3),l.Q6J("value",o.get("count").value),l.xp6(2),l.Q6J("value",o.get("amount").value)}}function b(e,r){if(1&e&&(l.TgZ(0,"section",9),l.TgZ(1,"ion-item-group"),l.TgZ(2,"ion-item-divider"),l.TgZ(3,"ion-label"),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"div",10),l.TgZ(6,"mat-form-field",11),l._UZ(7,"input",12),l.qZA(),l.TgZ(8,"mat-form-field"),l._UZ(9,"input",13),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e){var t=r.$implicit;l.Q6J("formGroupName",r.index),l.xp6(4),l.Oqu(t)}}function y(e,r){if(1&e&&(l.TgZ(0,"ion-content"),l.TgZ(1,"form",6),l.TgZ(2,"div",7),l.YNc(3,b,10,2,"section",8),l.qZA(),l.qZA(),l.qZA()),2&e){var t=l.oxw();l.xp6(1),l.Q6J("formGroup",t.procedureDetails),l.xp6(2),l.Q6J("ngForOf",t.procedures)}}var F,N=function(){var r=function(){function r(t,o,n,i,u,a,c){e(this,r),this.modalController=t,this.toastController=o,this.authService=n,this.router=i,this.storage=u,this.treatmentsService=a,this.proceduresService=c,this.hospitals=[],this.allProcedures=[],this.hospital$=new d.w}return t(r,[{key:"ngOnInit",value:function(){this.initializeForms()}},{key:"ionViewWillEnter",value:function(){this.initializeForms()}},{key:"ionViewWillLeave",value:function(){this.initializeForms(),this.hospital$.unsubscribe()}},{key:"getProcedures",value:function(e){return this.proceduresService.getProcedures(e)}},{key:"initializeForms",value:function(){var e=this;this.addProcedureForm=new u.cw({procedures:new u.NI([],[u.kI.required])}),this.procedureForm=new u.cw({procedures:new u.Oe([])}),this.hospital$=this.treatmentsService.getSelectedHospital().subscribe(function(r){return(0,s.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,this.getProcedures(r.id).toPromise();case 3:t=e.sent,this.allProcedures=t.map(function(e){return e.name}),e.next=8;break;case 7:this.router.navigateByUrl("").then();case 8:case"end":return e.stop()}},e,this)}))})}},{key:"openProcedureDetailsDialog",value:function(){return(0,s.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r,t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:I,componentProps:{procedures:this.addProcedureForm.get("procedures").value}});case 2:return r=e.sent,e.next=5,r.present();case 5:return e.next=7,r.onDidDismiss();case 7:t=e.sent,"dismissed"!==(o=t.data)&&this.addProcedure(o);case 10:case"end":return e.stop()}},e,this)}))}},{key:"addProcedure",value:function(e){var r=e.value;this.proceduresService.addProcedures(r);var t=this.procedureForm.get("procedures");r.forEach(function(e){var r=new u.cw({procedure:new u.NI(e.procedure,[u.kI.required]),count:new u.NI(e.count,[u.kI.min(1)]),amount:new u.NI(e.amount,[u.kI.required,u.kI.min(0)])});t.controls.push(r)})}},{key:"submit",value:function(){var e=this;this.procedureForm.valid&&(this.authService.showLoader("Saving procedures").then(),setTimeout(function(){e.router.navigateByUrl("procedures").then(function(){return e.authService.dismissLoader()})},1e3))}},{key:"presentToast",value:function(e){return(0,s.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.toastController.create({message:e,duration:2e3});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))}},{key:"deleteProcedure",value:function(e){this.proceduresService.removeProcedure(e.value.procedure);var r=this.procedureForm.get("procedures"),t=r.controls.reduce(function(e,r){return e.push(r.value.name),e},[]).indexOf(e.id);r.controls.splice(t,1)}}]),r}();return r.\u0275fac=function(e){return new(e||r)(l.Y36(a.IN),l.Y36(a.yF),l.Y36(p.e),l.Y36(c.F0),l.Y36(m.Ke),l.Y36(f.z),l.Y36(g.e))},r.\u0275cmp=l.Xpm({type:r,selectors:[["app-add-procedure"]],decls:21,vars:8,consts:[[3,"pageName"],["size","12",1,"fixed-form"],[1,"single-line-container","flex-md-row",3,"formGroup"],["formControlName","procedures","multiple","","required",""],[3,"value",4,"ngFor","ngForOf"],["color","secondary","type","button",3,"disabled","click"],[4,"ngIf"],["size","12",2,"margin-top","45%"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],[1,"bottom-fixed-div"],["type","submit",1,"w-100",3,"disabled"],[3,"value"],[1,"hint-text","mt-5","mb-0","ml-1"],["side","start"],["color","danger",3,"click"],[3,"formGroup"],[1,"flex-row"],[2,"width","20%","margin-right","8%"],["matInput","","formControlName","count","placeholder","Count",3,"value"],["matInput","","formControlName","amount","placeholder","Amount",3,"value"]],template:function(e,r){1&e&&(l._UZ(0,"app-header",0),l.TgZ(1,"ion-content"),l.TgZ(2,"ion-grid"),l.TgZ(3,"ion-row"),l.TgZ(4,"ion-col",1),l.TgZ(5,"form",2),l.TgZ(6,"mat-form-field"),l.TgZ(7,"mat-label"),l._uU(8,"Select Procedures"),l.qZA(),l.TgZ(9,"mat-select",3),l.YNc(10,x,2,2,"mat-option",4),l.qZA(),l.qZA(),l.TgZ(11,"ion-button",5),l.NdJ("click",function(){return r.openProcedureDetailsDialog()}),l._uU(12,"Add"),l.qZA(),l.qZA(),l.YNc(13,T,3,0,"ion-text",6),l.qZA(),l.TgZ(14,"ion-col",7),l.TgZ(15,"mat-accordion"),l.TgZ(16,"form",8),l.NdJ("ngSubmit",function(){return r.submit()}),l.YNc(17,k,14,4,"ion-item-sliding",9),l.TgZ(18,"div",10),l.TgZ(19,"ion-button",11),l._uU(20,"Save"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("pageName","Add a Procedure"),l.xp6(5),l.Q6J("formGroup",r.addProcedureForm),l.xp6(5),l.Q6J("ngForOf",r.allProcedures),l.xp6(1),l.Q6J("disabled",0===r.addProcedureForm.get("procedures").value.length),l.xp6(2),l.Q6J("ngIf",r.procedureForm.get("procedures").controls.length>0),l.xp6(3),l.Q6J("formGroup",r.procedureForm),l.xp6(1),l.Q6J("ngForOf",r.procedureForm.get("procedures").controls),l.xp6(2),l.Q6J("disabled",0===r.procedureForm.get("procedures").controls.length))},directives:[h.G,a.W2,a.jY,a.Nd,a.wI,u._Y,u.JL,u.sg,v.KE,v.hX,Z.gD,u.JJ,u.u,u.Q7,i.sg,a.YG,i.O5,w.pp,q.ey,a.yW,a.td,a.IK,a.u8,a.Ie,w.ib,w.yz,w.u4,A.Nt,u.Fj],styles:[".fixed-form[_ngcontent-%COMP%]{position:fixed;width:97%!important;background-color:#fff;z-index:999}"]}),r}(),I=function(){var r=function(){function r(t,o){e(this,r),this.modalController=t,this.toastController=o,this.procedureDetails=new u.cw({procedures:new u.Oe([])})}return t(r,[{key:"ngOnInit",value:function(){this.initializeForm()}},{key:"presentToast",value:function(e){return(0,s.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.toastController.create({message:e,duration:2e3});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))}},{key:"dismissModal",value:function(e){this.modalController.dismiss(e).then()}},{key:"initializeForm",value:function(){var e=this;this.procedures.forEach(function(r){return e.addProcedure(r)})}},{key:"addProcedure",value:function(e){var r=this.procedureDetails.get("procedures"),t=new u.cw({procedure:new u.NI(e),count:new u.NI(1,[u.kI.min(1),u.kI.required]),amount:new u.NI(100,[u.kI.min(0),u.kI.required])});r.controls.push(t)}},{key:"submit",value:function(){if(this.procedureDetails.valid){var e=this.procedureDetails.get("procedures");this.dismissModal(e)}else this.presentToast("Form is invalid").then()}}]),r}();return r.\u0275fac=function(e){return new(e||r)(l.Y36(a.IN),l.Y36(a.yF))},r.\u0275cmp=l.Xpm({type:r,selectors:[["procedure-details"]],inputs:{procedures:"procedures"},decls:11,vars:1,consts:[["translucent",""],["slot","end"],[3,"click"],[4,"ngIf"],[1,"bottom-fixed-div"],["type","submit","color","secondary",1,"w-100",3,"click"],[2,"margin-bottom","36px",3,"formGroup"],["formArrayName","procedures"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"flex-row","ml-5","mt-2",2,"width","72%"],[2,"width","20%","margin-right","8%"],["matInput","","formControlName","count","placeholder","Count","required",""],["matInput","","formControlName","amount","placeholder","Amount per procedure","required",""]],template:function(e,r){1&e&&(l.TgZ(0,"ion-header",0),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-title"),l._uU(3,"Modal Content"),l.qZA(),l.TgZ(4,"ion-buttons",1),l.TgZ(5,"ion-button",2),l.NdJ("click",function(){return r.dismissModal("dismissed")}),l._uU(6,"Close"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(7,y,4,2,"ion-content",3),l.TgZ(8,"div",4),l.TgZ(9,"ion-button",5),l.NdJ("click",function(){return r.submit()}),l._uU(10,"Submit"),l.qZA(),l.qZA()),2&e&&(l.xp6(7),l.Q6J("ngIf",r.procedureDetails))},directives:[a.Gu,a.sr,a.wd,a.Sm,a.YG,i.O5,a.W2,u._Y,u.JL,u.sg,u.CE,i.sg,u.x0,a.Ub,a.rH,a.Q$,v.KE,A.Nt,u.Fj,u.JJ,u.u,u.Q7],encapsulation:2}),r}(),J=[{path:"",component:N}],P=function(){var r=function r(){e(this,r)};return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=l.oAB({type:r}),r.\u0275inj=l.cJS({imports:[[c.Bz.forChild(J)],c.Bz]}),r}(),C=n(5530),S=n(4369),U=n(2935),G=((F=function r(){e(this,r)}).\u0275fac=function(e){return new(e||F)},F.\u0275mod=l.oAB({type:F}),F.\u0275inj=l.cJS({imports:[[i.ez,u.u5,u.UX,a.Pc,P,C.K,A.c,S.ot,Z.LD,w.To,U.Is]]}),F)}}])}();